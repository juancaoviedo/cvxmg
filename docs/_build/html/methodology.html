

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Methodology formulation &mdash; cvxmg 2.0.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="cvxmg 2.0.0 documentation" href="index.html"/>
        <link rel="next" title="DSM integration into the sizing" href="dsm.html"/>
        <link rel="prev" title="Example of how to use CVXMG" href="example.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> cvxmg
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="configini.html">Setting the informationf of the IMG</a><ul>
<li class="toctree-l2"><a class="reference internal" href="configini.html#setting-prob-info">Setting “prob_info”</a></li>
<li class="toctree-l2"><a class="reference internal" href="configini.html#setting-sources-info">Setting “sources_info”</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="constructores.html">Types of constructors for the IMG</a><ul>
<li class="toctree-l2"><a class="reference internal" href="constructores.html#deterministicdsms">DeterministicDSMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="constructores.html#multiyeardsms">MultiyearDSMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="constructores.html#stochasticdsms">StochasticDSMS</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="example.html">Example of how to use CVXMG</a><ul>
<li class="toctree-l2"><a class="reference internal" href="example.html#first-step-create-the-information-of-prob-info-and-sources-info">First step: Create the information of “prob_info” and “sources_info”</a></li>
<li class="toctree-l2"><a class="reference internal" href="example.html#second-step-set-the-constructor">Second step: Set the constructor</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Methodology formulation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#proposed-solution">Proposed solution</a></li>
<li class="toctree-l2"><a class="reference internal" href="#main-assumptions">Main assumptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mathematical-formulation">Mathematical formulation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dsm.html">DSM integration into the sizing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="dsm.html#flat-tariff-baseline-case">Flat tariff (Baseline case):</a></li>
<li class="toctree-l2"><a class="reference internal" href="dsm.html#time-of-use-tariff">Time of use tariff:</a></li>
<li class="toctree-l2"><a class="reference internal" href="dsm.html#critical-peak-pricing">Critical peak pricing:</a></li>
<li class="toctree-l2"><a class="reference internal" href="dsm.html#day-ahead-dynamic-pricing">Day ahead dynamic pricing:</a></li>
<li class="toctree-l2"><a class="reference internal" href="dsm.html#incentive-based-pricing">Incentive-based pricing:</a></li>
<li class="toctree-l2"><a class="reference internal" href="dsm.html#fixed-shape-pricing">Fixed Shape Pricing:</a></li>
<li class="toctree-l2"><a class="reference internal" href="dsm.html#direct-load-curtailment-strategy">Direct Load Curtailment Strategy:</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="multiyear.html">Multiyear analysis</a><ul>
<li class="toctree-l2"><a class="reference internal" href="multiyear.html#set-problem-information">Set problem information</a></li>
<li class="toctree-l2"><a class="reference internal" href="multiyear.html#save-historic-weather-and-demand-data">Save historic weather and demand data:</a></li>
<li class="toctree-l2"><a class="reference internal" href="multiyear.html#create-synthetic-data-historic-data">create_synthetic_data(historic_data):</a></li>
<li class="toctree-l2"><a class="reference internal" href="multiyear.html#read-results-of-previous-years">Read results of previous years:</a></li>
<li class="toctree-l2"><a class="reference internal" href="multiyear.html#actualize-solver-parameters">Actualize solver parameters:</a></li>
<li class="toctree-l2"><a class="reference internal" href="multiyear.html#yearly-solver-prob-info-synthetic-data-year-prev-data-act-param">yearly_solver(prob_info, synthetic_data[year], prev_data, act_param):</a></li>
<li class="toctree-l2"><a class="reference internal" href="multiyear.html#summary-year-resul">summary[year] = resul:</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="stochastic.html">Stochastic multiyear analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="sources.html">Energy sources models</a><ul>
<li class="toctree-l2"><a class="reference internal" href="sources.html#photovoltaic-system">Photovoltaic system</a></li>
<li class="toctree-l2"><a class="reference internal" href="sources.html#battery-energy-storage-system">Battery energy storage system</a></li>
<li class="toctree-l2"><a class="reference internal" href="sources.html#diesel-generator">Diesel generator</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Classes, Objects, and Methods of CVXMG</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cvxmg.html">cvxmg modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">cvxmg</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Methodology formulation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/methodology.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="methodology-formulation">
<h1>Methodology formulation<a class="headerlink" href="#methodology-formulation" title="Permalink to this headline">¶</a></h1>
<p>The problem that aims to solve CVXMG is to study the effects of Demand Side Management (DSM) strategies over the planning of Islanded/Isolated Microgrids (IMGs). The study should consider the impact of the technical and environmental aspects. The study will address regulatory aspects as well. This requires a methodology capable of:</p>
<ul class="simple">
<li><p>Integrate different energy sources for the IMG.</p></li>
<li><p>Compute the sizing of the energy sources.</p></li>
<li><p>Compute the energy dispatch of the energy sources.</p></li>
<li><p>Consider the effects of the DSM over the lifetime of the project.</p></li>
<li><p>Consider business models to recreate the real-life conditions of the development of IMG projects.</p></li>
<li><p>Set the tariffs of the energy for the customers.</p></li>
<li><p>Evaluate the impact of the DSM strategies over the planning of IMGs.</p></li>
</ul>
<p>A methodology with the above characteristics does not exist in the reviewed literature. In this regard, CVXMG builds a methodology to solve that.</p>
<div class="section" id="proposed-solution">
<h2>Proposed solution<a class="headerlink" href="#proposed-solution" title="Permalink to this headline">¶</a></h2>
<p>The proposed solution implements a multiyear-stochastic analysis using Disciplined Convex Stochastic Programming (DCSP). DCSP builds on principles from stochastic optimization and convex analysis, representing a considerable advantage to build the desired methodology <a class="reference internal" href="references.html#ali2015" id="id1"><span>[Ali2015]</span></a>. Equation <a class="reference internal" href="#equation-equ-dcsp-formulation">(1)</a> presents the general formulation of a convex stochastic problem:</p>
<div class="math notranslate nohighlight" id="equation-equ-dcsp-formulation">
<span class="eqno">(1)<a class="headerlink" href="#equation-equ-dcsp-formulation" title="Permalink to this equation">¶</a></span>\[\begin{split}\begin{equation}
    minimize\;E(a_1(x,\xi)) \\
    subject\;to\;E(b_i(x,\xi)) = 0\;\; i=1, \ldots ,B \\
    c_i(x,\xi) \geq 0\;\; i=1, \ldots ,C
\end{equation}\end{split}\]</div>
<p>where <span class="math notranslate nohighlight">\(b_i:\mathbf{R}^n \times \mathbf{R}^q \to \mathbf{R}\)</span>, <span class="math notranslate nohighlight">\(i=1, \ldots ,B\)</span> are convex functions in <span class="math notranslate nohighlight">\(x\)</span> for each value of the random variable <span class="math notranslate nohighlight">\(\xi \in \mathbf{R}^q\)</span>, and <span class="math notranslate nohighlight">\(c_i:\mathbf{R}^n \to \mathbf{R}\)</span>, <span class="math notranslate nohighlight">\(i=1 ,\ldots ,C\)</span> are (deterministic) affine functions; since expectations preserve convexity, the objective and inequality constraint functions in <a class="reference internal" href="#equation-equ-dcsp-formulation">(1)</a> are (also) convex in <span class="math notranslate nohighlight">\(x\)</span>, making <a class="reference internal" href="#equation-equ-dcsp-formulation">(1)</a> a convex optimization problem <a class="reference internal" href="references.html#ali2015" id="id2"><span>[Ali2015]</span></a>, <a class="reference internal" href="references.html#liberti2008" id="id3"><span>[Liberti2008]</span></a>.</p>
</div>
<div class="section" id="main-assumptions">
<h2>Main assumptions<a class="headerlink" href="#main-assumptions" title="Permalink to this headline">¶</a></h2>
<p>The formulation of the methodology assumes that the planner can have at least one year of historical data of weather variables and electrical demand. The formulation use this historical data to build the multiyear, and multiyear-stochastic analysis of the methodology by using a scenario construction technique.</p>
<p>The methodology assumes that there is no presence of smart or controllable loads in the IMGs. Considering this, it is not possible to apply advanced DSM strategies for IMGs. Due to this limitation, the present study proposes to use price-based DSM strategies and one DSM strategy based on Direct Load Curtailment. Both kinds of DSM strategies offer less technical difficulty as their more sophisticated counterparts.</p>
<p>The formulation also assumes that the planner can know the price elasticity of the demand of the customers. By using the price elasticity of the customers’ demand, it is possible to compute how they will react to different stimuli. Additionally, the price elasticity of the demand intrinsically implies that without any external stimulus, the customers do not have any incentive to modify their consumption patterns. This assumption means that customers will not alter their consumption patterns if the IMG uses a flat tariff.</p>
</div>
<div class="section" id="mathematical-formulation">
<h2>Mathematical formulation<a class="headerlink" href="#mathematical-formulation" title="Permalink to this headline">¶</a></h2>
<p>The formulation of the problem aims to minimize the total costs of the IMG project. The total costs of the project are Capital Expenditures (<span class="math notranslate nohighlight">\(\zeta\)</span>), Operational Expenditures (<span class="math notranslate nohighlight">\(\vartheta\)</span>), Maintenance Expenditures (<span class="math notranslate nohighlight">\(\mu\)</span>) and Carbon Taxes Expenditures (<span class="math notranslate nohighlight">\(\phi\)</span>):</p>
<div class="math notranslate nohighlight" id="equation-equ-capex">
<span class="eqno">(2)<a class="headerlink" href="#equation-equ-capex" title="Permalink to this equation">¶</a></span>\[\begin{equation}
    \zeta=\sum_{u=1}^U{C_{u}I_{u}}
\end{equation}\]</div>
<div class="math notranslate nohighlight" id="equation-equ-opex">
<span class="eqno">(3)<a class="headerlink" href="#equation-equ-opex" title="Permalink to this equation">¶</a></span>\[\begin{equation}
    \vartheta =\sum_{t=1}^T\sum_{u=1}^U{\lambda_{u,t}E_{u,t}}
\end{equation}\]</div>
<div class="math notranslate nohighlight" id="equation-equ-maintenance">
<span class="eqno">(4)<a class="headerlink" href="#equation-equ-maintenance" title="Permalink to this equation">¶</a></span>\[\begin{equation}
    \mu =\sum_{t=1}^T\sum_{u=1}^U{\Lambda_{u,t}E_{u,t}}
\end{equation}\]</div>
<div class="math notranslate nohighlight" id="equation-equ-taxes">
<span class="eqno">(5)<a class="headerlink" href="#equation-equ-taxes" title="Permalink to this equation">¶</a></span>\[\begin{equation}
    \Phi =\sum_{t=1}^T\sum_{u=1}^U{B_u F_{u,t}}
\end{equation}\]</div>
<p>and <span class="math notranslate nohighlight">\(C_{u}\)</span>, <span class="math notranslate nohighlight">\(I_{u}\)</span>, <span class="math notranslate nohighlight">\(\lambda_{u,t}\)</span>, <span class="math notranslate nohighlight">\(\Lambda_{u,t}\)</span>, <span class="math notranslate nohighlight">\(E_{u,t}\)</span>, <span class="math notranslate nohighlight">\(B_u\)</span> and <span class="math notranslate nohighlight">\(F_{u,t}\)</span> represent the installed capacity, unitary investment cost, unitary dispatch costs, unitary maintenance costs, dispatched energy, carbon dioxide production by liter, and fuel consumption of the <span class="math notranslate nohighlight">\(u\)</span> energy source at time <span class="math notranslate nohighlight">\(t\)</span>, respectively. <span class="math notranslate nohighlight">\(T\)</span> represents the horizon of the optimization.</p>
<p>The mathematical formulation allows the planner to build all kinds of business models by considering that a <span class="math notranslate nohighlight">\(i \in I\)</span> number of different investors (<span class="math notranslate nohighlight">\(\varphi\)</span>) can fund the IMG project. These <span class="math notranslate nohighlight">\(i \in I\)</span> investors can contribute to pay capital (<span class="math notranslate nohighlight">\(\varphi_{i,\zeta}\)</span>), operational (<span class="math notranslate nohighlight">\(\varphi_{i,\vartheta}\)</span>) or maintenance (<span class="math notranslate nohighlight">\(\varphi_{i,\mu}\)</span>) expenditures. The objective function captures the different sources of money to fund the project:</p>
<div class="math notranslate nohighlight" id="equation-equ-objective-1">
<span class="eqno">(6)<a class="headerlink" href="#equation-equ-objective-1" title="Permalink to this equation">¶</a></span>\[\begin{equation}
        X_{1} = argmin_{C_{u},E_{u,t}} \; \sum_{i=1}^I{\varphi_{i,\zeta}\zeta+\varphi_{i,\vartheta}\vartheta+\varphi_{i,\mu}\mu+\varphi_{i,\phi}\phi}
\end{equation}\]</div>
<p>The formulation considers the energy prices as the only revenue stream for the investors that aim to recover their investment and have profits. If the business model has private investors ($varphi^{priv}$) the formulation allows to guarantee an expected Rate of Return ($R$) using the following constraint:</p>
<div class="math notranslate nohighlight" id="equation-equ-return-of-investment">
<span class="eqno">(7)<a class="headerlink" href="#equation-equ-return-of-investment" title="Permalink to this equation">¶</a></span>\[\begin{equation}
    (1+R)\sum_{y=1}^{Y}{(\varphi^{priv,\zeta}\zeta_{y}+\varphi^{priv,\vartheta}\vartheta_{y}+\varphi^{priv,\mu}\mu_{y} + \varphi^{priv,\phi}\phi_{y})} \geq \sum_{t=1}^{YT}{\pi_{x,t}D_{t}^{dr}}
\end{equation}\]</div>
<p>where $pi_{n,t}$ is the price of the energy at time $t$ using the $n$ DSM strategy, and $D_{t}^{dr}$ is the electrical demand after the $x$ DSM strategy is applied. However, it is crucial to highlight that the horizon of this constraint is the life time of the project. The life time of the project is measured in years ($Y$) for the sum in the left, and in hours for the sum in the right ($Y$ multiplied by $T$).</p>
<p>Equation <a class="reference internal" href="#equation-equ-elasticity">(8)</a> uses the demand with flat tariff ($D_{t}^{flat}$) as the base demand, the flat tariff ($pi^{flat}$) as the base price, the $x$ price ($pi_{x,t}$) as the DSM tariff, and the price-elasticity ($e_{t}$) of the customers to compute the response of the demand $D_{t}^{dr}$.</p>
<div class="math notranslate nohighlight" id="equation-equ-elasticity">
<span class="eqno">(8)<a class="headerlink" href="#equation-equ-elasticity" title="Permalink to this equation">¶</a></span>\[\begin{equation}
    e_{t}=\frac{\pi^{flat}(D_{t}^{dr}-D_{t}^{flat})}{D_{t}^{flat}(\pi_{x,t} - \pi^{flat})}
\end{equation}\]</div>
<p>The formulation allows defining the changes in the total electrical demand after the introduction of the DSM using factor $Psi^{c}$ in Equation <a class="reference internal" href="#equation-equ-6a">(9)</a>. Factor $Psi^{c}$ is an input parameter that the planner choose according to the conditions of the IMG project. Values $Psi^{c} leq 1$ decreases the total energy consumption, while values $Psi^{c} geq 1$ increases the total energy consumption over the optimization horizon. A value  $Psi^{c}=1$ indicates that the total energy consumption over the optimization horizon remains constant after the introduction of DSM.</p>
<div class="math notranslate nohighlight" id="equation-equ-6a">
<span class="eqno">(9)<a class="headerlink" href="#equation-equ-6a" title="Permalink to this equation">¶</a></span>\[\begin{equation}
    \sum_{t=1}^TD_{t}^{dr} - \Psi^{c}\sum_{t=1}^TD_{t}^{flat} = 0
\end{equation}\]</div>
<p>The formulation naturally includes the balance Equation:</p>
<div class="math notranslate nohighlight" id="equation-equ-energy-balance-f2-f1">
<span class="eqno">(10)<a class="headerlink" href="#equation-equ-energy-balance-f2-f1" title="Permalink to this equation">¶</a></span>\[\begin{equation}
    \sum_{t=1}^{T}\sum_{u=1}^{U} E_{u,t} - EE_t + LE_t - D_{t}^{dr}=0
\end{equation}\]</div>
<p>where $EE_t$ and $LE_t$ are the excess and lack of energy. According to <a class="reference internal" href="references.html#chauhan2014" id="id4"><span>[Chauhan2014]</span></a>, <a class="reference internal" href="references.html#diaf2008" id="id5"><span>[Diaf2008]</span></a>, the loss of power supply probability (LPSP) is:</p>
<div class="math notranslate nohighlight" id="equation-equ-19">
<span class="eqno">(11)<a class="headerlink" href="#equation-equ-19" title="Permalink to this equation">¶</a></span>\[\begin{equation}
    LPSP=\frac{\sum_{t=1}^{T}LE_t}{\sum_{t=1}^{T} D_{t}^{dr}}
\end{equation}\]</div>
<p>Similarly, Equation <a class="reference internal" href="#equation-equ-20">(12)</a> defines the excess of power supply probability (EPSP) as:</p>
<div class="math notranslate nohighlight" id="equation-equ-20">
<span class="eqno">(12)<a class="headerlink" href="#equation-equ-20" title="Permalink to this equation">¶</a></span>\[\begin{equation}
    EPSP=\frac{\sum_{t=1}^{T}EE_t}{\sum_{t=1}^{T} D_{t}^{dr}}
\end{equation}\]</div>
<p>By using Equations <a class="reference internal" href="#equation-equ-19">(11)</a> and <a class="reference internal" href="#equation-equ-20">(12)</a> it is possible to create two constraints to control LPSP <a class="reference internal" href="#equation-equ-lack-energy">(13)</a> and EPSP <a class="reference internal" href="#equation-equ-excess-energy">(14)</a> over the optimization horizon:</p>
<div class="math notranslate nohighlight" id="equation-equ-lack-energy">
<span class="eqno">(13)<a class="headerlink" href="#equation-equ-lack-energy" title="Permalink to this equation">¶</a></span>\[\begin{equation}
    \sum_{t=1}^{T}LE_t\leq LPSP\sum_{t=1}^{T} D_{t}^{dr}
\end{equation}\]</div>
<div class="math notranslate nohighlight" id="equation-equ-excess-energy">
<span class="eqno">(14)<a class="headerlink" href="#equation-equ-excess-energy" title="Permalink to this equation">¶</a></span>\[\begin{equation}
    \sum_{t=1}^{T}EE_t\leq EPSP\sum_{t=1}^{T} D_{t}^{dr}
\end{equation}\]</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="dsm.html" class="btn btn-neutral float-right" title="DSM integration into the sizing" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="example.html" class="btn btn-neutral" title="Example of how to use CVXMG" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Juan Carlos Oviedo Cepeda.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> and ❤️  using a custom <a href="https://github.com/LinxiFan/Stanford-theme">theme</a> based on <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/language_data.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>